{% extends "base.html" %}

{% block title %}Exercise Library - Workout Tracker{% endblock %}

{% block content %}
<div class="exercises-page">
    <header class="page-header">
        <h1>Exercise Library</h1>
        <a href="{{ url_for('exercises.new') }}" class="btn btn-primary">Add New</a>
    </header>

    <!-- Filters -->
    <div class="card filter-card">
        <form method="GET" class="filter-form">
            <div class="form-row">
                <div class="form-group">
                    <input type="text" name="search" placeholder="Search exercises..."
                           value="{{ current_search }}" class="search-input">
                </div>
            </div>
            <div class="form-row">
                <div class="form-group">
                    <select name="muscle_group">
                        <option value="">All Muscles</option>
                        {% for mg in muscle_groups %}
                        <option value="{{ mg }}" {% if mg == current_muscle_group %}selected{% endif %}>
                            {{ mg }}
                        </option>
                        {% endfor %}
                    </select>
                </div>
                <div class="form-group">
                    <select name="type">
                        <option value="">All Types</option>
                        <option value="strength" {% if current_type == 'strength' %}selected{% endif %}>Strength</option>
                        <option value="cardio" {% if current_type == 'cardio' %}selected{% endif %}>Cardio</option>
                    </select>
                </div>
            </div>
            <button type="submit" class="btn btn-secondary btn-block">Filter</button>
        </form>
    </div>

    <!-- Exercise List -->
    <div class="card">
        {% if exercises %}
        <ul class="exercise-list">
            {% set current_group = namespace(value='') %}
            {% for exercise in exercises %}
            {% if exercise.muscle_group != current_group.value %}
            {% set current_group.value = exercise.muscle_group %}
            <li class="group-header">{{ exercise.muscle_group or 'Uncategorized' }}</li>
            {% endif %}
            <li class="exercise-item">
                <a href="{{ url_for('exercises.view', exercise_id=exercise.exercise_id) }}">
                    <div class="exercise-info">
                        <span class="exercise-name">{{ exercise.name }}</span>
                        <span class="exercise-type-badge {{ exercise.exercise_type }}">{{ exercise.exercise_type }}</span>
                    </div>
                    <span class="exercise-arrow">&rsaquo;</span>
                </a>
            </li>
            {% endfor %}
        </ul>
        {% else %}
        <p class="empty-state">No exercises found. Try adjusting your filters or add a new exercise.</p>
        {% endif %}
    </div>
</div>
{% endblock %}
